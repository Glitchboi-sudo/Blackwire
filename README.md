# BlackWire

<h3 align="center">
  <pre>
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó
‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë
‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë
‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë
‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë
 ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù
  </pre>
</h3>
<h3 align="center">Security from M√©xico to all</h3>

![Estado](https://img.shields.io/badge/status-En_desarrollo-green)
![License](https://img.shields.io/badge/license-GNU_AGPLv3-blue)

---

## Descripci√≥n

**BlackWire** es un proxy interceptor HTTP/HTTPS de c√≥digo abierto dise√±ado para pruebas de seguridad, an√°lisis de tr√°fico web y debugging de aplicaciones. Ofrece una alternativa ligera, portable y extensible a herramientas como Burp Suite o OWASP ZAP, con un frontend web moderno y un potente backend basado en mitmproxy. Permite interceptar, modificar y reenviar peticiones en tiempo real, gestionar m√∫ltiples proyectos, y extender funcionalidades mediante plugins personalizados.

---

## Tabla de Contenidos

- [Caracter√≠sticas](#-caracter√≠sticas)
- [Instalaci√≥n](#-instalaci√≥n)
  - [Instalaci√≥n R√°pida](#-instalaci√≥n-r√°pida)
  - [Requisitos](#-requisitos)
  - [M√©todos de Instalaci√≥n](#-m√©todos-de-instalaci√≥n)
  - [Desktop Launcher](#-desktop-launcher)
  - [Certificados SSL](#-certificados-ssl)
- [Uso](#-uso)
  - [Inicio R√°pido](#inicio-r√°pido)
  - [Gesti√≥n de Proyectos](#gesti√≥n-de-proyectos)
  - [Proxy Interceptor](#proxy-interceptor)
  - [Repeater](#repeater)
  - [Scope](#scope)
  - [Extensiones](#extensiones)
- [Portabilidad](#-portabilidad)
- [Verificaci√≥n y Troubleshooting](#-verificaci√≥n-y-troubleshooting)
- [Contribuir](#-contribuir)
- [Cr√©ditos](#-cr√©ditos)

---

## Caracter√≠sticas

- **Proxy Interceptor**: Captura y modifica peticiones/respuestas HTTP/HTTPS en tiempo real
- **Gesti√≥n de Proyectos**: Organiza tus sesiones de trabajo con proyectos independientes
- **Repeater**: Reenv√≠a y modifica peticiones capturadas para pruebas iterativas
- **Scope/Filtros**: Define reglas de alcance para interceptar solo el tr√°fico relevante
- **Sistema de Extensiones**: Ampl√≠a funcionalidades con plugins personalizados en Python
- **Interface Web Moderna**: Frontend intuitivo accesible desde el navegador
- **100% Portable**: Funciona desde cualquier directorio sin instalaci√≥n del sistema
- **Base de Datos SQLite**: Cada proyecto almacena su historial localmente
- **Cross-Platform**: Compatible con cualquier distribuci√≥n Linux

---

## Instalaci√≥n

### Instalaci√≥n R√°pida

```bash
# 1. Descarga el proyecto
git clone https://github.com/[tu-usuario]/blackwire.git
cd blackwire

# 2. Ejecuta el instalador
chmod +x install.sh
./install.sh

# 3. Lanza la aplicaci√≥n
./launch-with-browser.sh
```

¬°Eso es todo! El instalador se encarga de todo autom√°ticamente.

---

### Requisitos

#### Dependencias del Sistema
```bash
# Ubuntu/Debian
sudo apt install python3 python3-pip python3-venv

# Fedora/RHEL/CentOS
sudo dnf install python3 python3-pip

# Arch Linux
sudo pacman -S python python-pip
```

---

### M√©todos de Instalaci√≥n

#### M√©todo 1: Instalador Autom√°tico (Recomendado)

El script `install.sh` realiza todas las configuraciones necesarias:

```bash
chmod +x install.sh
./install.sh
```

**Qu√© hace el instalador:**
1. Verifica versi√≥n de Python (3.8+)
2. Verifica/instala pip
3. Crea entorno virtual
4. Instala dependencias desde requirements.txt
5. Crea directorios necesarios
6. Genera certificados SSL de mitmproxy
7. Hace ejecutables todos los scripts
8. Opcionalmente instala launcher en el men√∫

#### M√©todo 2: Instalaci√≥n Manual

Si prefieres control total sobre la instalaci√≥n:

```bash
# 1. Crear entorno virtual
python3 -m venv venv

# 2. Activar entorno
source venv/bin/activate

# 3. Actualizar pip
pip install --upgrade pip

# 4. Instalar dependencias
pip install -r requirements.txt

# 5. Crear directorios
mkdir -p data projects

# 6. Hacer scripts ejecutables
chmod +x *.sh

# 7. Iniciar
./launch-with-browser.sh
```

---

### üñ•Ô∏è Desktop Launcher

#### Instalar Launcher en el Men√∫

```bash
./install-desktop.sh
```

Despu√©s de instalarlo, puedes:
- Buscar "Blackwire" en el men√∫ de aplicaciones
- Fijarlo al dock/panel
- Asignarle un atajo de teclado

#### Desinstalar Launcher

```bash
./uninstall-desktop.sh
```

---

### Certificados SSL

BlackWire usa **mitmproxy** para interceptar tr√°fico HTTPS. Necesitas instalar el certificado CA:

#### Ubicaci√≥n del Certificado

```bash
~/.mitmproxy/mitmproxy-ca-cert.pem
```

#### Instalar en Navegador

**Firefox:**
1. Preferencias ‚Üí Privacidad y Seguridad ‚Üí Certificados ‚Üí Ver Certificados
2. Autoridades ‚Üí Importar
3. Selecciona: `~/.mitmproxy/mitmproxy-ca-cert.pem`
4. Conf√≠a para: "Identificar sitios web"

**Chrome/Chromium:**
1. Configuraci√≥n ‚Üí Privacidad y Seguridad ‚Üí Seguridad ‚Üí Gestionar certificados
2. Autoridades ‚Üí Importar
3. Selecciona: `~/.mitmproxy/mitmproxy-ca-cert.pem`

**Sistema (Linux):**
```bash
# Ubuntu/Debian
sudo cp ~/.mitmproxy/mitmproxy-ca-cert.pem /usr/local/share/ca-certificates/mitmproxy.crt
sudo update-ca-certificates

# Fedora/RHEL
sudo cp ~/.mitmproxy/mitmproxy-ca-cert.pem /etc/pki/ca-trust/source/anchors/
sudo update-ca-trust
```

---

## Uso
### Inicio R√°pido

```bash
# Opci√≥n 1: Launcher autom√°tico (abre navegador)
./launch-with-browser.sh

# Opci√≥n 2: Start manual
./start.sh
```

Una vez iniciado:
- **Frontend**: http://localhost:5000
- **Proxy**: http://localhost:8080 (configura este proxy en tu navegador/herramienta)

### Gesti√≥n de Proyectos

BlackWire organiza el trabajo en **proyectos** independientes. Cada proyecto tiene su propia base de datos y configuraci√≥n.

**Funcionalidades:**
- Crear/eliminar proyectos
- Cambiar entre proyectos activos
- Exportar/importar datos de proyectos
- Cada proyecto mantiene su propio historial aislado

### Proxy Interceptor

1. **Iniciar Proxy**: Bot√≥n "Start Proxy" en la interfaz
2. **Configurar Navegador**: Proxy HTTP en `localhost:8080`
3. **Habilitar Intercept**: Activa el interceptor para pausar peticiones
4. **Modificar Peticiones**: Edita headers, body, m√©todo, URL
5. **Forward/Drop**: Env√≠a o descarta la petici√≥n modificada

**Caracter√≠sticas:**
- Intercepta HTTP y HTTPS
- Modifica peticiones y respuestas en tiempo real
- Historial completo de tr√°fico
- B√∫squeda y filtrado de peticiones
- Exportaci√≥n de datos

### Repeater

Reenv√≠a peticiones capturadas para pruebas iterativas:

1. Selecciona una petici√≥n del historial
2. Env√≠ala al Repeater
3. Modifica par√°metros, headers o body
4. Reenv√≠a m√∫ltiples veces
5. Compara respuestas

Ideal para:
- Testing de par√°metros
- Fuzzing manual
- Bypass de validaciones
- An√°lisis de respuestas

### Scope

Define reglas para filtrar qu√© tr√°fico interceptar:

```json
{
  "pattern": "example.com",
  "rule_type": "include",
  "enabled": true
}
```

**Tipos de reglas:**
- **Include**: Solo intercepta URLs que coincidan
- **Exclude**: Ignora URLs que coincidan
- Soporta regex y wildcards

**Ejemplo:**
```
Include: *.example.com/*      (solo example.com)
Exclude: *.google.com/*       (ignora Google)
Include: /api/.*              (solo endpoints de API)
```

### Extensiones

BlackWire soporta plugins personalizados en Python para extender funcionalidades.

**Ubicaci√≥n:** `backend/extensions/`

**Ejemplo de extensi√≥n:**
```python
# backend/extensions/mi_extension.py

def on_request(flow):
    """Se ejecuta en cada petici√≥n"""
    if "Authorization" in flow.request.headers:
        print(f"Token detectado: {flow.request.headers['Authorization']}")

def on_response(flow):
    """Se ejecuta en cada respuesta"""
    if flow.response.status_code == 500:
        print(f"Error 500 en: {flow.request.url}")
```

**Hooks disponibles:**
- `on_request(flow)`: Antes de enviar la petici√≥n
- `on_response(flow)`: Despu√©s de recibir la respuesta
- `on_error(flow)`: Cuando hay un error

Las extensiones tienen acceso completo al objeto `flow` de mitmproxy.

---

## Portabilidad

BlackWire es **100% portable**. Todos los scripts detectan autom√°ticamente su ubicaci√≥n.

### Caracter√≠sticas Portables

- **Detecci√≥n Autom√°tica de Rutas**: Sin rutas hardcoded
- **Desktop Launcher Din√°mico**: Se actualiza autom√°ticamente
- **Sin Dependencias del Sistema**: Todo en el directorio del proyecto

### Ejemplos de Uso Portable

**Mover a otro directorio:**
```bash
mv blackwire /opt/blackwire
cd /opt/blackwire
./launch-with-browser.sh
```

**Copiar a otra m√°quina:**
```bash
# En m√°quina origen
tar -czf blackwire.tar.gz blackwire/

# En m√°quina destino
tar -xzf blackwire.tar.gz
cd blackwire
./install.sh
```

**Ejecutar desde USB:**
```bash
cd /media/usb/blackwire
./launch-with-browser.sh
```

**Reinstalar desktop launcher tras mover:**
```bash
./uninstall-desktop.sh
./install-desktop.sh
```

### Limitaciones

‚ö†Ô∏è **Entorno Virtual no portable**: El `venv/` contiene rutas absolutas.

**Soluci√≥n:**
```bash
rm -rf venv
./install.sh
```

‚ö†Ô∏è **Desktop Launcher**: Actualizar despu√©s de mover el proyecto.

**Soluci√≥n:**
```bash
./uninstall-desktop.sh
./install-desktop.sh
```

---

## Verificaci√≥n y Troubleshooting

### Verificar Instalaci√≥n

```bash
python3 --version
# Debe ser ‚â• 3.8

source venv/bin/activate
pip list | grep -E "(fastapi|mitmproxy|uvicorn)"
./verify-install.sh
```

### Troubleshooting Com√∫n

#### Problema: Python version too old

```bash
# Soluci√≥n: Instala Python 3.8+ o usa pyenv
curl https://pyenv.run | bash
pyenv install 3.11.0
pyenv local 3.11.0
```

#### Problema: pip not found

```bash
# Ubuntu/Debian
sudo apt install python3-pip

# get-pip
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python3 get-pip.py --user
```

#### Problema: Permission denied

```bash
# Haz los scripts ejecutables
chmod +x *.sh
sudo chown -R $USER:$USER .
```

#### Problema: Port already in use

```bash
# Backend (5000)
lsof -i :5000
kill -9 <PID>

# Proxy (8080)
lsof -i :8080
kill -9 <PID>
```

#### Problema: Certificado no funciona

```bash
# Regenera certificados
rm -rf ~/.mitmproxy
./install.sh  # Los regenera autom√°ticamente
```

---

## Contribuir

Este proyecto no solo es un repositorio: es un espacio abierto para aprender, experimentar y construir juntos. **Buscamos activamente contribuciones**, ya sea en la parte t√©cnica o incluso en la documentaci√≥n.

- **En funcionalidades:** Si tienes ideas para nuevas caracter√≠sticas (integraciones con otras herramientas, mejoras en el interceptor, nuevos tipos de an√°lisis), ¬°comp√°rtelas!
- **En software:** Desde correcci√≥n de bugs, optimizaci√≥n de rendimiento, hasta mejoras en la legibilidad del c√≥digo o documentaci√≥n; todo aporte, grande o peque√±o, suma much√≠simo.
- **En extensiones:** Crea y comparte plugins para automatizar tareas espec√≠ficas de pentesting o an√°lisis.

No necesitas ser experto para ayudar: si crees que algo puede explicarse mejor, que el c√≥digo puede ser m√°s claro, o que hay una forma m√°s elegante de hacer algo, **cu√©ntanos o abre un Pull Request**.

---

## Cr√©ditos

Proyecto inspirado en herramientas como [Burp Suite](https://portswigger.net/burp), [OWASP ZAP](https://www.zaproxy.org/) y [mitmproxy](https://mitmproxy.org/).

Creado por **[Erik Alcantara](https://www.linkedin.com/in/erik-alc%C3%A1ntara-covarrubias-29a97628a/)**.

**Tecnolog√≠as utilizadas:**
- [mitmproxy](https://mitmproxy.org/) - Motor de proxy interceptor
- [FastAPI](https://fastapi.tiangolo.com/) - Backend API
- [React](https://react.dev/) - Frontend web
- [SQLite](https://www.sqlite.org/) - Base de datos
